{% extends "core/dashboard.html" %}

{% block content %}
<div class="courses-page">  {# template-specific container #}

<style>
.courses-page h2 {
    color: #2c3e50;
    margin-bottom: 15px;
}

.courses-page a {
    text-decoration: none;
    color: white;
    background-color: #3498db;
    padding: 8px 14px;
    border-radius: 4px;
    transition: background 0.3s;
}

.courses-page a:hover {
    background-color: #2980b9;
}

.courses-page table {
    width: 100%;
    border-collapse: collapse;
    margin-bottom: 30px;
    background: #fff;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
}

.courses-page thead {
    background-color: #2c3e50;
    color: #ecf0f1;
}

.courses-page thead th {
    padding: 12px 10px;
    text-align: left;
    font-weight: bold;
}

.courses-page tbody td {
    padding: 10px;
    border-bottom: 1px solid #ddd;
    vertical-align: top;
}

.courses-page tbody tr:nth-child(even) {
    background-color: #f9f9f9;
}

.courses-page tbody tr:hover {
    background-color: #f1f1f1;
}

/* Responsive */
@media (max-width: 768px) {
    .courses-page table, .courses-page thead, .courses-page tbody, .courses-page th, .courses-page td, .courses-page tr { display: block; }
    .courses-page thead tr { position: absolute; top: -9999px; left: -9999px; }
    .courses-page tr { margin-bottom: 15px; border: 1px solid #ddd; border-radius: 6px; padding: 10px; background: #fff; }
    .courses-page td { border: none; position: relative; padding-left: 50%; }
    .courses-page td::before { position: absolute; left: 15px; width: 45%; padding-right: 10px; white-space: nowrap; font-weight: bold; content: attr(data-label); }
}
</style>

<h2>Courses</h2>
<a href="{% url 'create_course' %}" style="display:inline-block; margin-bottom:15px;">
    âž• Create Course
</a>

<table>
    <thead>
        <tr>
            <th>Code</th>
            <th>Name</th>
            {% if request.user.role == "head" %}
                <th>Created By</th>
            {% endif %}
            <th>Learning Outcomes</th>
            <th>Assessments</th>
        </tr>
    </thead>
    <tbody>
        {% for course in courses %}
        <tr>
            <td data-label="Code">{{ course.code }}</td>
            <td data-label="Name">{{ course.name }}</td>
            {% if request.user.role == "head" %}
                <td data-label="Created By">{{ course.created_by.username }}</td>
            {% endif %}
            <td data-label="Learning Outcomes">
                {% for lo in course.learning_outcomes.all %}
                    {{ lo.code }} - {{ lo.description }}<br>
                {% empty %}
                    No Learning Outcomes
                {% endfor %}
            </td>
            <td data-label="Assessments">
                {% for a in course.assesments.all %}
                    {{ a.get_name_display }}<br>
                {% empty %}
                    No Assessments
                {% endfor %}
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>

</div>
{% endblock %}

